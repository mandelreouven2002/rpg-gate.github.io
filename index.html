<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שער להרפתקה - שער הכניסה לעולם משחקי התפקידים בישראל</title>
    <link rel="icon" type="image/x-icon" href="/rpg-game.png">

    <!-- Meta Tags for SEO and Social Media -->
    <meta name="description" content="המדריך המקיף למתחילים בעולם משחקי התפקידים בישראל: מה זה משחקי תפקידים, איך מתחילים, שיטות משחק, קהילות, כנסים וכל מה שצריך כדי לצאת להרפתקה.">
    <meta name="keywords" content="משחקי תפקידים, איך להתחיל לשחק, מדריך למתחיל, מבוכים ודרקונים, פאת'פיינדר, חרבות וכשפים, קהילת RPG ישראל, כנס דרקוניקון, פסטיבל אייקון, למצוא קבוצת משחק, RPG, D&D">
    <meta name="author" content="ראובן צירל-מנדלוביץ'">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="שער להרפתקה - שער הכניסה לעולם משחקי התפקידים בישראל">
    <meta property="og:description" content="המדריך המקיף למתחילים בעולם משחקי התפקידים בישראל. כל מה שצריך כדי להתחיל את ההרפתקה שלכם.">
    <meta property="og:url" content="https://gate.rrpg.top">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="he_IL">
    <meta name="twitter:card" content="summary_large_image">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Assistant', sans-serif; scroll-behavior: smooth; }
        /* עשינו את אפקט ה-hover עדין יותר */
        .card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        
        /* Nav Link Styles */
        .nav-link { position: relative; overflow: hidden; transition: color 0.3s; }
        .nav-link::after { content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px; background-color: #4f46e5; transition: all 0.3s ease-in-out; transform: translateX(-50%); }
        .nav-link:hover::after { width: 100%; }
        
        /* Active State for Scroll Spy */
        .nav-link.active { color: #4f46e5; font-weight: 700; }
        .nav-link.active::after { width: 100%; }

        .details-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 700px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .contact-btn.active { background-color: #8b5cf6; color: white; }
        #background-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-image: url('/rpg-bg.png'); background-repeat: repeat; opacity: 0.025; pointer-events: none; }
        
        /* Offset for sticky header when clicking anchors */
        html { scroll-padding-top: 140px; } 
    </style>
</head>

<body class="bg-amber-50 text-stone-800">
    <div id="background-overlay"></div>

    <!-- GLOBAL SITE NAVIGATION -->
    <header class="bg-indigo-900 text-white shadow-lg sticky top-0 z-[60]">
        <div class="container mx-auto px-4 md:px-6 py-3 flex flex-col md:flex-row justify-between items-center gap-3 md:gap-0">
            <!-- Logo area -->
            <div class="w-full md:w-auto flex justify-center md:justify-start">
                <h1 class="text-xl md:text-2xl font-bold text-white">
                    <a href="/index.html" class="flex items-center gap-2"><span>⚔️</span> שער להרפתקה</a>
                </h1>
            </div>
            
            <!-- Navigation (Unified for Desktop & Mobile) -->
            <nav class="flex w-full md:w-auto justify-center md:justify-end space-x-reverse space-x-6 font-medium text-sm md:text-base border-t border-indigo-800 pt-2 md:border-0 md:pt-0">
                <a href="/index.html" class="hover:text-indigo-300 transition-colors">בית</a>
                <a href="/search.html" class="hover:text-indigo-300 transition-colors">פורטל חיפוש</a>
                <a href="/articles/index.html" class="text-yellow-400 font-bold transition-colors">פורטל מאמרים</a>
            </nav>
        </div>
    </header>

    <!-- PAGE NAVIGATION (STICKY SUB-NAV) -->
    <header class="bg-white/90 backdrop-blur-sm shadow-md sticky top-[94px] md:top-[56px] z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-center md:justify-between items-center">
                <!-- Links centered on mobile, spread on desktop -->
                <div class="hidden md:flex w-full justify-center space-x-reverse space-x-8">
                    <a href="#intro-what-is" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">מה זה?</a>
                    <a href="#getting-started" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">מה צריך?</a>
                    <a href="#systems" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">בחירת שיטה</a>
                    <a href="#find-group" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">איך מוצאים קבוצה?</a>
                    <a href="#community" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">הקהילה</a>
                    <a href="#resources" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">חנויות וחוגים</a>
                    <a href="#contact" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1 page-nav-link">צרו קשר</a>
                </div>
                
                <!-- Mobile Dropdown for Page Nav -->
                <div class="md:hidden w-full">
                    <select id="mobile-nav" class="w-full bg-white border border-stone-300 rounded-md p-2 text-base text-stone-700 focus:outline-none focus:border-indigo-500">
                        <option value="" disabled selected>נווטו בעמוד...</option>
                        <option value="#intro-what-is">מה זה?</option>
                        <option value="#getting-started">מה צריך?</option>
                        <option value="#systems">בחירת שיטה</option>
                        <option value="#find-group">איך מוצאים קבוצה?</option>
                        <option value="#community">הקהילה</option>
                        <option value="#resources">חנויות וחוגים</option>
                        <option value="#contact">צרו קשר</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- HERO SECTION - A GUIDED PATH -->
        <section id="intro" class="text-center mb-16 pt-10">
            <h2 class="text-5xl md:text-6xl font-bold mb-4 text-stone-900">יוצאים להרפתקה הראשונה שלכם</h2>
            <p class="max-w-3xl mx-auto text-xl text-stone-600 mb-12">
                עולם משחקי התפקידים מחכה לכם. הנה הדרך הפשוטה והמודרכת להתחיל:
            </p>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <a href="#intro-what-is" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">🤔</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">צעד 1: מה זה בכלל?</h3>
                    <p class="text-lg text-stone-600">גלו מהם משחקי תפקידים, איך הם עובדים, ולמה זה התחביב הטוב בעולם.</p>
                </a>
                <a href="#systems" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">🎲</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">צעד 2: בוחרים משחק</h3>
                    <p class="text-lg text-stone-600">לכל הרפתקה יש חוקים. מצאו את שיטת המשחק שמתאימה בדיוק לכם.</p>
                </a>
                <a href="#community" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">🤝</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">צעד 3: מצטרפים לקהילה</h3>
                    <p class="text-lg text-stone-600">מצאו קבוצה לשחק בה, חנויות, חוגים, כנסים ומקומות שיעזרו לכם להתחיל.</p>
                </a>
            </div>
        </section>

        <!-- WHAT IS RPG? SECTION -->
        <section id="intro-what-is" class="mb-16 pt-10 scroll-mt-32">
            <div class="max-w-4xl mx-auto text-center"> 
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-8 text-stone-900">אז מה זה בעצם משחקי תפקידים?</h2>
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right max-w-4xl mx-auto mb-8">
                    <h3 class="text-3xl font-bold mb-3 text-stone-900">ליתר ביטחון, מה זה בכלל משחקי תפקידים?</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        משחקי תפקידים הם פעילות חברתית שבה המשתתפים מגלמים דמויות בדיוניות בתוך עולם סיפור מסוים. כל שחקן בוחר דמות ומגיב לסיטואציות על פי אופייה, רצונותיה ויכולותיה. יש שיטה שמנחה את החוקים, ויש את "אדם האחראי" או המנחה שמוביל את העלילה.
                    </p>
                    <p class="text-lg text-stone-600">
                        המטרה? ליצור יחד חוויות משותפות, לספר סיפור בלתי נשכח, לפתור תעלומות, ולפעמים גם פשוט לצחוק וליהנות ביחד.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                        <h3 class="text-3xl font-bold mb-3 text-indigo-700 flex items-center justify-start"><span class="text-4xl ml-3">🎲</span>משחקי תפקידים שולחניים (TTRPG)</h3>
                        <p class="text-lg text-stone-600">חוויה של סיפור שיתופי סביב שולחן (או אונליין). בעזרת דמיון, סט חוקים, קוביות ומנחה, אתם והחברים שלכם יוצרים יחד סיפור הרפתקאות ייחודי. הדגש הוא על יצירתיות, פתרון בעיות ועבודת צוות.</p>
                    </div>
                    <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                        <h3 class="text-3xl font-bold mb-3 text-teal-700 flex items-center justify-start"><span class="text-4xl ml-3">🎭</span>משחקי תפקידים חיים (LARP)</h3>
                        <p class="text-lg text-stone-600">כאן אתם לא רק מספרים את הסיפור - אתם חיים אותו. המשתתפים מגלמים פיזית את הדמויות, לובשים תלבושות ופועלים במרחב אמיתי. חוויה תיאטרלית וסוחפת המדגישה אלתור ואינטראקציה פיזית.</p>
                    </div>
                </div>

                <!-- הוספת סרטון "מורה מבוכים" -->
                <div class="mt-12 text-center max-w-4xl mx-auto">
                    <h3 class="text-3xl font-bold mb-4 text-stone-900">רוצים לראות איך נראה משחק?</h3>
                    <p class="text-xl text-stone-600 mb-6">
                        צפו בסרטון "מורה מבוכים" של דונקי שמסביר בצורה כיפית וברורה מה זה משחק תפקידים:
                    </p>
                    <a href="https://www.youtube.com/watch?v=KJvCcxxfqmc" target="_blank" rel="noopener noreferrer" class="card inline-block relative group rounded-lg shadow-lg overflow-hidden max-w-lg w-full">
                        <img src="https://img.youtube.com/vi/KJvCcxxfqmc/hqdefault.jpg" alt="מורה מבוכים - איך נראה משחק תפקידים?" class="w-full h-auto transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center transition-opacity duration-300 group-hover:bg-opacity-20">
                            <svg class="w-20 h-20 text-white opacity-80 group-hover:opacity-100" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- NEW SECTION: WHAT DO YOU NEED? -->
        <section id="getting-started" class="mb-16 pt-10 scroll-mt-32">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">מה צריך כדי להתחיל?</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">החדשות הטובות: לא צריך הרבה! אפשר להתחיל לשחק עם ציוד בסיסי שכבר יש לכם בבית.</p>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">✏️</div>
                    <h3 class="text-2xl font-bold mb-2 text-green-700">המינימום ההכרחי</h3>
                    <ul class="text-lg text-stone-600 list-inside text-right space-y-2">
                        <li>✔️ חברים (2-5 אנשים)</li>
                        <li>✔️ דף, עיפרון ומחק</li>
                        <li>✔️ סט קוביות (או אפליקציה)</li>
                        <!-- הוסר "ספר חוקים בסיסי" -->
                    </ul>
                </div> 
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">📚</div>
                    <h3 class="text-2xl font-bold mb-2 text-blue-700">ערכת התחלה</h3>
                    <p class="text-lg text-stone-600">הדרך המומלצת ביותר. ערכות כמו של "מבוכים ודרקונים" או "חרבות וכשפים" כוללות כל מה שצריך למשחק הראשון: ספר חוקים מקוצר, הרפתקה מוכנה, דמויות וקוביות.</p>
                </div> 
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">🏰</div>
                    <h3 class="text-2xl font-bold mb-2 text-purple-700">למשקיענים (אופציונלי)</h3>
                    <p class="text-lg text-stone-600">עם הזמן, אפשר לשדרג את החוויה עם מיניאטורות (דמויות פלסטיק), מפות קרב, מסתור למנחה וספרי הרחבה. אבל זה ממש לא חובה כדי ליהנות!</p>
                </div>
            </div>
        </section>

        <!-- SYSTEMS SECTION -->
        <section id="systems" class="mb-16 pt-10 scroll-mt-32"> 
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">בחירת שיטת משחק</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">כל הרפתקה צריכה חוקים. שיטת המשחק היא מערכת הכללים והעולם שבהם תפעלו. הנה ארבע מהשיטות הפופולריות ביותר בישראל, שמתאימות במיוחד למתחילים.</p>
            <div id="systems-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            </div>
            <div class="mb-10">
                <h3 class="text-3xl font-bold mb-3 text-stone-900 text-center mt-10">השוואת רמת המורכבות</h3>
                <div class="chart-container">
                    <canvas id="systemsChart"></canvas>
                </div> 
                <p class="text-base text-center text-stone-500 mt-2">תרשים זה מציג השוואה כללית של רמת מורכבות החוקים בין השיטות (נמוך יותר = פשוט יותר).</p>
            </div>
        </section>

        <!-- NEW SECTION: HOW TO FIND A GROUP -->
        <section id="find-group" class="mb-16 pt-10 text-center scroll-mt-32"> 
            <h2 class="text-4xl md:text-5xl font-bold mb-2 text-stone-900">איך מוצאים קבוצת משחק?</h2>
            <p class="text-xl text-stone-600 max-w-3xl mx-auto mb-8">
                מציאת קבוצה היא הצעד המרגש הבא! הנה כמה דרכים מומלצות:
            </p>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right hover:border-indigo-400">
                    <h3 class="text-2xl font-bold mb-3 text-indigo-700 flex items-center justify-start">👨‍👩‍👧‍👦 לשחקנים בוגרים</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        הדרך הכי טובה היא להצטרף לאחת מקבוצות הקהילה הגדולות באונליין. שם תוכלו למצוא מודעות של מנחים ושחקנים, וגם לפרסם שאתם מחפשים קבוצה.
                    </p>
                    <a href="#community" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors duration-200 text-base">מצאו קבוצות קהילה</a>
                </div>
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right hover:border-teal-400">
                    <h3 class="text-2xl font-bold mb-3 text-teal-700 flex items-center justify-start">👧👦 לילדים ובני נוער</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        משחקי תפקידים הם חוויה מדהימה לילדים! ישנם חוגים ופעילויות ייעודיות שבהם מנחים מנוסים מלמדים את המשחק ומפעילים קבוצות.
                    </p>
                    <a href="#resources" class="inline-block bg-teal-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-teal-700 transition-colors duration-200 text-base">מצאו חוגים באזורכם</a>
                </div>
            </div>
        </section>

        <!-- COMMUNITY SECTION -->
        <section id="community" class="mb-16 pt-10 scroll-mt-32">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">הקהילה: ארגונים, כנסים וקבוצות</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">אתם לא לבד! קהילת משחקי התפקידים בישראל חיה, תוססת ומלאה באנשים שישמחו לעזור לכם להתחיל. כאן תמצאו את הגופים המרכזיים שמניעים את התחביב.</p>
            <div class="flex justify-center items-center space-x-4 space-x-reverse mb-8 flex-wrap">
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="all">הכל</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="organization">🏢 ארגון/עמותה</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="event">📅 אירוע/כנס</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="group">💬 קהילה/קבוצה</button>
                <div class="relative">
                    <input type="text" id="community-search" placeholder="חיפוש אזור/ישוב..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2 mr-2 text-base w-64">
                </div>
            </div>
            <div id="community-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div> 
            <div id="community-no-results" class="hidden text-center text-stone-600 text-lg mt-8">
                <p>לא נמצאו תוצאות התואמות לחיפוש שלך.</p>
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="community-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">טען עוד</button>
                <button id="community-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">צמצם</button>
            </div>
        </section>

        <!-- RESOURCES SECTION -->
        <section id="resources" class="pt-10 mb-16 scroll-mt-32">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">איפה קונים ומשחקים?</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">צריכים קוביות, ספרי חוקים או מקום לשחק בו? מהחנויות המקצועיות ועד חוגי ילדים, אלו המקומות שיספקו לכם את כל מה שצריך.</p> 
            <div class="flex justify-center items-center space-x-4 space-x-reverse mb-8 flex-wrap">
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="all">הכל</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="business">🏪 עסק/חנות</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="kids">🧒 חוגי ילדים</button>
                <div class="relative">
                    <input type="text" id="resources-search" placeholder="חיפוש אזור/ישוב..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 mb-2 mr-2 text-base w-64">
                </div>
            </div>
            <div id="resources-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
            <div id="resources-no-results" class="hidden text-center text-stone-600 text-lg mt-8">
                <p>לא נמצאו תוצאות התואמות לחיפוש שלך.</p>
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="resources-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">טען עוד</button>
                <button id="resources-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">צמצם</button>
            </div>
        </section>
        
        <!-- UPCOMING EVENT SECTION -->
        <section id="closest-event" class="pt-10 mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-8 text-stone-900">מתי הכנס הבא?</h2>
            <div id="closest-event-container" class="max-w-md mx-auto">
                <!-- Closest event card will be rendered here -->
            </div> 
            <p class="text-base text-center text-stone-500 mt-4">המידע אודות זמני הכנסים הוא הערכה בלבד. תמיד כדאי להתעדכן באתרים הרשמיים של המארגנים.</p>
        </section>

        <!-- CONTACT SECTION -->
        <section id="contact" class="pt-10 scroll-mt-32">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">צרו קשר</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">
                מצאתם טעות? רוצים להוסיף את העסק או הקהילה שלכם? יש לכם הצעה לשיפור? נשמח לשמוע!
            </p>
            <div id="contact-content" class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                <div class="text-center">
                    <p class="text-xl text-stone-700">
                        ניתן לשלוח מייל ישירות לכתובת:
                        <a href="mailto:gate@rrpg.top?subject=%D7%A4%D7%A0%D7%99%D7%99%D7%94%20%D7%91%D7%A0%D7%95%D7%A9%D7%90%20%D7%9C%D7%90%D7%AA%D7%A8%20%D7%A9%D7%A2%D7%A8%20%D7%94%D7%A8%D7%A4%D7%AA%D7%A7%D7%94" class="text-purple-600 hover:underline font-bold">gate@rrpg.top</a>
                    </p>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center py-6 mt-12 bg-stone-200 border-t border-stone-300">
        <p class="text-base text-stone-600">נוצר באהבה עבור קהילת שחקני התפקידים בישראל ע"י <a href="https://rrpg.top" class="text-indigo-600 hover:underline">ראובן צירל-מנדלוביץ'</a>.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const systemsData = [
            { name: "מבוכים ודרקונים (D&D 5e)", badge: "הנפוץ ביותר בעולם", description: "המשחק הפופולרי ביותר בעולם, המציע חווית פנטזיה קלאסית. הוא משלב בצורה מופלאה אלמנטים של פנטזיה, קבלת החלטות אסטרטגית ושיתוף פעולה חברתי עמוק.", why: "נקודת הכניסה הסטנדרטית לתחביב. קל למצוא קבוצה וחומרים למתחילים, כמו 'ערכת ההתחלה' המצוינת.", complexity: 10, color: 'rgba(220, 38, 38, 0.7)', link: "https://www.dndbeyond.com/" },
            { name: "חרבות וכשפים", badge: "מומלץ למתחילים ולצעירים", description: "חזרה לשורשים של משחקי התפקידים, עם שיטה קלת-חוקים וגמישה המעודדת יצירתיות ואלתור מצד השחקנים והמנחה. הערכה למתחיל היא שער כניסה מושלם לתחביב.", why: "מעולה למתחילים ולילדים. ערכת המתחיל בעברית מלמדת את המשחק צעד-אחר-צעד, כולל הרפתקת סולו.", complexity: 3, color: 'rgba(217, 119, 6, 0.7)', link: "https://swordsandwizardry.co.il/" },
            { name: "פאת'פיינדר בעולמות פראיים", badge: "לחובבי האקשן", description: "שילוב מנצח של עולם הפנטזיה העשיר של 'פאת'פיינדר' עם מנוע החוקים המהיר והקולנועי של 'עולמות פראיים'. הרפתקאות מסמרות שיער ואקשן מותח עצבים.", why: "הטוב משני העולמות - עומק עלילתי עם חוקים קלילים. ספר הבסיס בעברית כולל את כל מה שצריך כדי להתחיל לשחק.", complexity: 7, color: 'rgba(34, 197, 94, 0.7)', link: "https://pundak.games/savage-pathfinder/" },
            { name: "מנוע האפוקליפסה", badge: "לחובבי חופש ומקוריות", description: "מנוע משחק גמיש שעליו בנויות שיטות רבות. שם דגש על סיפור ויצירתיות על פני קרבות טקטיים. המשחקים הנפוצים בעברית הם 'פלאים: גיבורי המחר' ו'וואנור'.", why: "מנוע פשוט ללמידה המאפשר להתמקד בסיפור. מתאים למגוון רחב של ז'אנרים וסגנונות משחק.", complexity: 5, color: 'rgba(255, 165, 0, 0.7)', link: "https://vanor.co.il/" }
        ];

        // --- Systems Section Rendering ---
        const systemsContainer = document.getElementById('systems-container');
        systemsData.forEach(system => {
            const card = document.createElement('div');
            card.className = 'card bg-white rounded-lg shadow-lg border border-stone-200 overflow-hidden flex flex-col';
            card.innerHTML = `
                <div class="p-6 cursor-pointer flex-grow" onclick="toggleDetails(this)">
                    ${system.badge ? `<div class="mb-3"><span class="text-sm font-bold text-white px-3 py-1 rounded-full" style="background-color: ${system.color.replace('0.7', '1')}">${system.badge}</span></div>` : ''}
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <a href="${system.link}" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-600">${system.name}</a>
                    </h3>
                    <p class="text-lg text-stone-600">${system.description}</p>
                    <div class="flex items-center justify-end mt-4 text-base font-semibold text-indigo-600">
                        <span>למה זה טוב למתחילים?</span>
                        <svg class="w-4 h-4 mr-2 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="details-content bg-gray-50">
                    <div class="p-6 border-t border-gray-200">
                        <p class="text-base text-stone-600">${system.why}</p>
                    </div>
                </div>
            `;
            systemsContainer.appendChild(card);
        });

        window.toggleDetails = function(element) {
            const content = element.nextElementSibling;
            const svg = element.querySelector('svg');
            if (content.style.maxHeight && content.style.maxHeight !== '0px') {
                content.style.maxHeight = '0px';
                svg.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                svg.style.transform = 'rotate(180deg)';
            }
        }
        
        // --- Card Creation and Filtering Logic ---
        function createCard(item) {
            let typeLabel = '';
            let typeColor = '';
            switch (item.type) {
                case 'organization': typeLabel = '🏢 ארגון/עמותה'; typeColor = 'bg-blue-100 text-blue-800'; break;
                case 'event': typeLabel = '📅 אירוע/כנס'; typeColor = 'bg-purple-100 text-purple-800'; break;
                case 'group': typeLabel = '💬 קהילה/קבוצה'; typeColor = 'bg-green-100 text-green-800'; break;
                case 'business': typeLabel = '🏪 עסק/חנות'; typeColor = 'bg-yellow-100 text-yellow-800'; break;
                case 'kids': typeLabel = '🧒 חוגי ילדים'; typeColor = 'bg-pink-100 text-pink-800'; break;
            }
            return `
                <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-indigo-400 h-full">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-bold text-stone-800 mb-2">${item.name}</h3>
                        <span class="text-sm font-semibold px-2 py-1 rounded-full ${typeColor} whitespace-nowrap">${typeLabel}</span>
                    </div>
                    ${item.location ? `<p class="text-base text-stone-500 mb-2 font-semibold">📍 ${item.location}</p>` : ''}
                    <p class="text-base text-stone-600">${item.description}</p>
                </a>
            `;
        }

        // --- UPDATED SEARCH LOGIC FOR REGIONS ---
        function setupFilterAndLoadMore(containerId, data, buttonClass, searchInputId, loadMoreBtnId, collapseBtnId, noResultsId, regionsData) {
            const container = document.getElementById(containerId);
            const buttons = document.querySelectorAll(`.${buttonClass}`);
            const searchInput = document.getElementById(searchInputId);
            const loadMoreBtn = document.getElementById(loadMoreBtnId);
            const collapseBtn = document.getElementById(collapseBtnId);
            const noResultsEl = document.getElementById(noResultsId);

            let currentFilter = 'all';
            let currentLimit = 6;

            function updateDisplay() {
                let filteredData = data;

                if (currentFilter !== 'all') {
                    filteredData = data.filter(item => item.type === currentFilter);
                }

                if (searchInput.value) {
                    const query = searchInput.value.trim().toLowerCase();
                    
                    // 1. Identify relevant regions based on the query
                    const relevantRegions = regionsData ? regionsData.filter(region => {
                        if (region.name.includes(query)) return true;
                        return region.settlements.some(settlement => settlement.includes(query));
                    }) : [];

                    // 2. Collect all potential location matches from these regions
                    const expandedKeywords = [];
                    relevantRegions.forEach(region => {
                        expandedKeywords.push(region.name);
                        region.settlements.forEach(s => {
                             expandedKeywords.push(s);
                             // תמיכה בשמות מורכבים כמו "תל אביב-יפו" כך שגם "תל אביב" יתפוס
                             if (s.includes('-')) {
                                 s.split('-').forEach(part => {
                                     if (part.trim().length > 2) expandedKeywords.push(part.trim());
                                 });
                             }
                        });
                    });

                    // Remove duplicates
                    const uniqueExpandedKeywords = [...new Set(expandedKeywords)];

                    // 3. Filter and Score
                    filteredData = filteredData.map(item => {
                        let score = 0;
                        
                        // Basic Checks
                        if (item.name.toLowerCase().includes(query)) score += 50;
                        if (item.description.toLowerCase().includes(query)) score += 20;
                        
                        // Location Checks
                        if (item.location) {
                            const loc = item.location.toLowerCase();
                            // Direct match
                            if (loc.includes(query)) score += 30;
                            
                            // Expanded match (Regional search)
                            if (uniqueExpandedKeywords.some(keyword => loc.includes(keyword))) {
                                score += 15; // Regional match
                            }
                        }
                        
                        return { item, score };
                    })
                    .filter(entry => entry.score > 0)
                    .sort((a, b) => b.score - a.score)
                    .map(entry => entry.item);
                }

                // Show "no results" message if applicable
                if(filteredData.length === 0 && searchInput.value) {
                    noResultsEl.classList.remove('hidden');
                } else {
                    noResultsEl.classList.add('hidden');
                }

                const dataToRender = filteredData.slice(0, currentLimit);
                container.innerHTML = dataToRender.map(createCard).join('');

                loadMoreBtn.classList.toggle('hidden', filteredData.length <= currentLimit);
                collapseBtn.classList.toggle('hidden', !(filteredData.length > 6 && currentLimit >= filteredData.length));
            }

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    currentFilter = button.dataset.filter;
                    currentLimit = 6;
                    buttons.forEach(btn => btn.classList.remove('active', 'bg-indigo-600', 'text-white', 'bg-teal-600', 'bg-indigo-100', 'text-indigo-900', 'bg-teal-100', 'text-teal-900'));
                    button.classList.add('active');
                    if (buttonClass.includes('community')) {
                        button.classList.add('bg-indigo-100', 'text-indigo-900');
                    } else {
                        button.classList.add('bg-teal-100', 'text-teal-900');
                    }
                    updateDisplay();
                });
            });

            searchInput.addEventListener('input', () => {
                currentLimit = 6;
                updateDisplay();
            });

            loadMoreBtn.addEventListener('click', () => {
                currentLimit += 6;
                updateDisplay();
            });        
            
            collapseBtn.addEventListener('click', () => {
                currentLimit = 6;
                updateDisplay();
            });

            updateDisplay();
        }

        // --- Closest Event Logic ---
        function getClosestEvent(eventsData) {
            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            const currentYear = now.getFullYear();
            const events = eventsData.filter(item => item.type === 'event');
            let closestEvent = null;
            let minTimeDiff = Infinity;
            
            let futureEvents = events.filter(event => {
                let eventYear = currentYear;
                if (event.month < currentMonth) {
                    eventYear++;
                }
                return new Date(eventYear, event.month - 1, 1) >= now;
            });

            if (futureEvents.length > 0) {
                futureEvents.sort((a, b) => { 
                     let aYear = a.month >= currentMonth ? currentYear : currentYear + 1; 
                     let bYear = b.month >= currentMonth ? currentYear : currentYear + 1; 
                     return new Date(aYear, a.month - 1, 1) - new Date(bYear, b.month - 1, 1);
                });
                return futureEvents[0];
            }
            
            // Fallback if all events passed for this year
            if (events.length > 0){ 
                 events.sort((a,b) => a.month - b.month); 
                 return events[0];
            }
            
            return null;
        }

        function renderClosestEvent(eventsData) {
            const closest = getClosestEvent(eventsData);
            const closestEventContainer = document.getElementById('closest-event-container');
            if (closest) {
                const monthNames = ["ינואר", "פברואר", "מרץ", "אפריל", "מאי", "יוני", "יולי", "אוגוסט", "ספטמבר", "אוקטובר", "נובמבר", "דצמבר"];
                const closestMonthName = monthNames[closest.month - 1];
                closestEventContainer.innerHTML = `
                    <a href="${closest.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-purple-400 text-center">
                        <h3 class="text-xl font-bold text-stone-800 mb-2">${closest.name}</h3>
                        <p class="text-lg text-stone-600 mb-2">מתקיים בדרך כלל בחודש: <span class="font-semibold text-purple-700">${closestMonthName}</span></p>
                        ${closest.location ? `<p class="text-base text-stone-600 mb-2">מיקום: ${closest.location}</p>` : ''}
                        <p class="text-base text-stone-600 mb-4">${closest.description}</p>
                        <p class="text-base font-bold text-purple-600">לחצו לפרטים נוספים באתר הרשמי</p>
                    </a>
                `;
            } else {
                closestEventContainer.innerHTML = `<p class="text-base text-center text-stone-600">אין כנסים קרובים זמינים כרגע.</p>`;
            }
        }

        // --- FETCH DATA FROM JSON ---
        fetch('data.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                const communityData = data.communityData;
                const resourcesData = data.resourcesData;
                const regionsData = data.regions; // טעינת המידע על האזורים

                // העברת המידע החדש לפונקציית הסינון
                setupFilterAndLoadMore('community-container', communityData, 'community-filter-btn', 'community-search', 'community-load-more-btn', 'community-collapse-btn', 'community-no-results', regionsData);
                setupFilterAndLoadMore('resources-container', resourcesData, 'resources-filter-btn', 'resources-search', 'resources-load-more-btn', 'resources-collapse-btn', 'resources-no-results', regionsData);
                renderClosestEvent(communityData);
            })
            .catch(error => {
                console.error('Error loading data:', error);
                const errorMessage = '<div class="col-span-full text-center text-red-600 font-bold text-lg mt-4">שגיאה בטעינת הנתונים. נא לנסות שוב מאוחר יותר.</div>';
                document.getElementById('community-container').innerHTML = errorMessage;
                document.getElementById('resources-container').innerHTML = errorMessage;
                document.getElementById('closest-event-container').innerHTML = '<p class="text-center text-red-600">לא ניתן לטעון מידע על כנסים כרגע.</p>';
            });

        // --- Chart.js Rendering ---
        const ctx = document.getElementById('systemsChart').getContext('2d');
        const systemsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: systemsData.map(s => s.name),
                datasets: [{
                    label: 'מורכבות חוקים',
                    data: systemsData.map(s => s.complexity),
                    backgroundColor: systemsData.map(s => s.color),
                    borderColor: systemsData.map(s => s.color.replace('0.7', '1')),
                    borderWidth: 1,
                    borderRadius: 5
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true, max: 10, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { font: { family: "'Assistant', sans-serif" }}},
                    y: { grid: { display: false }, ticks: { font: { family: "'Assistant', sans-serif", size: 14 }, autoSkip: false }}
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { rtl: true, bodyFont: { family: "'Assistant', sans-serif" }, titleFont: { family: "'Assistant', sans-serif" }}
                }
            }
        });

        // --- Mobile Navigation ---
        document.getElementById('mobile-nav').addEventListener('change', function() {
            const targetId = this.value;
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                // Adjust for both headers height (approx 56px top + 64px secondary = 120px)
                // Actually the scroll-padding-top handles this nicely for anchor links, 
                // but for JS scroll we might need explicit calculation if scroll-padding doesn't apply.
                // Using scrollIntoView directly works well with scroll-padding.
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });

        // --- Scroll Spy Logic ---
        const pageNavLinks = document.querySelectorAll('.page-nav-link');
        const sections = document.querySelectorAll('section');

        const observerOptions = {
            root: null,
            rootMargin: '-30% 0px -60% 0px', // Active region is the top-middle part of screen
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    // Remove active class from all
                    pageNavLinks.forEach(link => link.classList.remove('active'));
                    // Add active class to current
                    const activeLink = document.querySelector(`.page-nav-link[href="#${id}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active');
                    }
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });
    });
    </script>
</body>
</html>
