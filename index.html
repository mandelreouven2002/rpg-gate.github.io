<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×©×¢×¨ ×œ×”×¨×¤×ª×§×” - ×©×¢×¨ ×”×›× ×™×¡×” ×œ×¢×•×œ× ××©×—×§×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ</title>
    <link rel="icon" type="image/x-icon" href="/rpg-game.png">

    <!-- Meta Tags for SEO and Social Media -->
    <meta name="description" content="×”××“×¨×™×š ×”××§×™×£ ×œ××ª×—×™×œ×™× ×‘×¢×•×œ× ××©×—×§×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ: ××” ×–×” ××©×—×§×™ ×ª×¤×§×™×“×™×, ××™×š ××ª×—×™×œ×™×, ×©×™×˜×•×ª ××©×—×§, ×§×”×™×œ×•×ª, ×›× ×¡×™× ×•×›×œ ××” ×©×¦×¨×™×š ×›×“×™ ×œ×¦××ª ×œ×”×¨×¤×ª×§×”.">
    <meta name="keywords" content="××©×—×§×™ ×ª×¤×§×™×“×™×, ××™×š ×œ×”×ª×—×™×œ ×œ×©×—×§, ××“×¨×™×š ×œ××ª×—×™×œ, ××‘×•×›×™× ×•×“×¨×§×•× ×™×, ×¤××ª'×¤×™×™× ×“×¨, ×—×¨×‘×•×ª ×•×›×©×¤×™×, ×§×”×™×œ×ª RPG ×™×©×¨××œ, ×›× ×¡ ×“×¨×§×•× ×™×§×•×Ÿ, ×¤×¡×˜×™×‘×œ ××™×™×§×•×Ÿ, ×œ××¦×•× ×§×‘×•×¦×ª ××©×—×§, RPG, D&D">
    <meta name="author" content="×¨××•×‘×Ÿ ×¦×™×¨×œ-×× ×“×œ×•×‘×™×¥'">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="×©×¢×¨ ×œ×”×¨×¤×ª×§×” - ×©×¢×¨ ×”×›× ×™×¡×” ×œ×¢×•×œ× ××©×—×§×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ">
    <meta property="og:description" content="×”××“×¨×™×š ×”××§×™×£ ×œ××ª×—×™×œ×™× ×‘×¢×•×œ× ××©×—×§×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ. ×›×œ ××” ×©×¦×¨×™×š ×›×“×™ ×œ×”×ª×—×™×œ ××ª ×”×”×¨×¤×ª×§×” ×©×œ×›×.">
    <meta property="og:url" content="https://gate.rrpg.top">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="he_IL">
    <meta name="twitter:card" content="summary_large_image">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Assistant', sans-serif; scroll-behavior: smooth; }
        /* ×¢×©×™× ×• ××ª ××¤×§×˜ ×”-hover ×¢×“×™×Ÿ ×™×•×ª×¨ */
        .card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .nav-link { position: relative; overflow: hidden; }
        .nav-link::after { content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px; background-color: #4f46e5; transition: all 0.3s ease-in-out; transform: translateX(-50%); }
        .nav-link:hover::after { width: 100%; }
        .details-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 700px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .contact-btn.active { background-color: #8b5cf6; color: white; }
        #background-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-image: url('/rpg-bg.png'); background-repeat: repeat; opacity: 0.025; pointer-events: none; }
    </style>
</head>

<body class="bg-amber-50 text-stone-800">
    <div id="background-overlay"></div>

    <header class="bg-white/80 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl md:text-3xl font-bold text-indigo-600"><a href="#">×©×¢×¨ ×œ×”×¨×¤×ª×§×” âš”ï¸</a></h1>
                <div class="hidden md:flex space-x-reverse space-x-8">
                    <a href="#intro-what-is" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">××” ×–×”?</a>
                    <a href="#getting-started" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">××” ×¦×¨×™×š?</a>
                    <a href="#systems" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">×‘×—×™×¨×ª ×©×™×˜×”</a>
                    <a href="#find-group" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">××™×š ××•×¦××™× ×§×‘×•×¦×”?</a>
                    <a href="#community" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">×”×§×”×™×œ×”</a>
                    <a href="#resources" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">×—× ×•×™×•×ª ×•×—×•×’×™×</a>
                    <a href="#contact" class="nav-link text-lg text-stone-600 hover:text-indigo-600 font-semibold pb-1">×¦×¨×• ×§×©×¨</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-stone-300 rounded-md p-2 text-base text-stone-700">
                        <option value="#intro-what-is">××” ×–×”?</option>
                        <option value="#getting-started">××” ×¦×¨×™×š?</option>
                        <option value="#systems">×‘×—×™×¨×ª ×©×™×˜×”</option>
                        <option value="#find-group">××™×š ××•×¦××™× ×§×‘×•×¦×”?</option>
                        <option value="#community">×”×§×”×™×œ×”</option>
                        <option value="#resources">×—× ×•×™×•×ª ×•×—×•×’×™×</option>
                        <option value="#contact">×¦×¨×• ×§×©×¨</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- HERO SECTION - A GUIDED PATH -->
        <section id="intro" class="text-center mb-16 pt-10">
            <h2 class="text-5xl md:text-6xl font-bold mb-4 text-stone-900">×™×•×¦××™× ×œ×”×¨×¤×ª×§×” ×”×¨××©×•× ×” ×©×œ×›×</h2>
            <p class="max-w-3xl mx-auto text-xl text-stone-600 mb-12">
                ×¢×•×œ× ××©×—×§×™ ×”×ª×¤×§×™×“×™× ××—×›×” ×œ×›×. ×”× ×” ×”×“×¨×š ×”×¤×©×•×˜×” ×•×”××•×“×¨×›×ª ×œ×”×ª×—×™×œ:
            </p>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <a href="#intro-what-is" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">ğŸ¤”</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">×¦×¢×“ 1: ××” ×–×” ×‘×›×œ×œ?</h3>
                    <p class="text-lg text-stone-600">×’×œ×• ××”× ××©×—×§×™ ×ª×¤×§×™×“×™×, ××™×š ×”× ×¢×•×‘×“×™×, ×•×œ××” ×–×” ×”×ª×—×‘×™×‘ ×”×˜×•×‘ ×‘×¢×•×œ×.</p>
                </a>
                <a href="#systems" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">ğŸ²</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">×¦×¢×“ 2: ×‘×•×—×¨×™× ××©×—×§</h3>
                    <p class="text-lg text-stone-600">×œ×›×œ ×”×¨×¤×ª×§×” ×™×© ×—×•×§×™×. ××¦××• ××ª ×©×™×˜×ª ×”××©×—×§ ×©××ª××™××” ×‘×“×™×•×§ ×œ×›×.</p>
                </a>
                <a href="#community" class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center hover:border-indigo-400">
                    <div class="text-6xl mb-3">ğŸ¤</div>
                    <h3 class="text-2xl font-bold mb-2 text-indigo-700">×¦×¢×“ 3: ××¦×˜×¨×¤×™× ×œ×§×”×™×œ×”</h3>
                    <p class="text-lg text-stone-600">××¦××• ×§×‘×•×¦×” ×œ×©×—×§ ×‘×”, ×—× ×•×™×•×ª, ×—×•×’×™×, ×›× ×¡×™× ×•××§×•××•×ª ×©×™×¢×–×¨×• ×œ×›× ×œ×”×ª×—×™×œ.</p>
                </a>
            </div>
        </section>

        <!-- WHAT IS RPG? SECTION -->
        <!-- ×”×•×¡×¨ ×”×¨×§×¢ ×”×œ×‘×Ÿ ×›×“×™ ×œ×©××•×¨ ×¢×œ ××—×™×“×•×ª ×¢× ×¨×§×¢ ×”×¢××•×“ -->
        <section id="intro-what-is" class="mb-16 pt-10">
            <div class="max-w-4xl mx-auto text-center"> 
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-8 text-stone-900">××– ××” ×–×” ×‘×¢×¦× ××©×—×§×™ ×ª×¤×§×™×“×™×?</h2>
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right max-w-4xl mx-auto mb-8">
                    <h3 class="text-3xl font-bold mb-3 text-stone-900">×œ×™×ª×¨ ×‘×™×˜×—×•×Ÿ, ××” ×–×” ×‘×›×œ×œ ××©×—×§×™ ×ª×¤×§×™×“×™×?</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        ××©×—×§×™ ×ª×¤×§×™×“×™× ×”× ×¤×¢×™×œ×•×ª ×—×‘×¨×ª×™×ª ×©×‘×” ×”××©×ª×ª×¤×™× ××’×œ××™× ×“××•×™×•×ª ×‘×“×™×•× ×™×•×ª ×‘×ª×•×š ×¢×•×œ× ×¡×™×¤×•×¨ ××¡×•×™×. ×›×œ ×©×—×§×Ÿ ×‘×•×—×¨ ×“××•×ª ×•××’×™×‘ ×œ×¡×™×˜×•××¦×™×•×ª ×¢×œ ×¤×™ ××•×¤×™×™×”, ×¨×¦×•× ×•×ª×™×” ×•×™×›×•×œ×•×ª×™×”. ×™×© ×©×™×˜×” ×©×× ×—×” ××ª ×”×—×•×§×™×, ×•×™×© ××ª "××“× ×”××—×¨××™" ××• ×”×× ×—×” ×©××•×‘×™×œ ××ª ×”×¢×œ×™×œ×”.
                    </p>
                    <p class="text-lg text-stone-600">
                        ×”××˜×¨×”? ×œ×™×¦×•×¨ ×™×—×“ ×—×•×•×™×•×ª ××©×•×ª×¤×•×ª, ×œ×¡×¤×¨ ×¡×™×¤×•×¨ ×‘×œ×ª×™ × ×©×›×—, ×œ×¤×ª×•×¨ ×ª×¢×œ×•××•×ª, ×•×œ×¤×¢××™× ×’× ×¤×©×•×˜ ×œ×¦×—×•×§ ×•×œ×™×”× ×•×ª ×‘×™×—×“.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                        <h3 class="text-3xl font-bold mb-3 text-indigo-700 flex items-center justify-start"><span class="text-4xl ml-3">ğŸ²</span>××©×—×§×™ ×ª×¤×§×™×“×™× ×©×•×œ×—× ×™×™× (TTRPG)</h3>
                        <p class="text-lg text-stone-600">×—×•×•×™×” ×©×œ ×¡×™×¤×•×¨ ×©×™×ª×•×¤×™ ×¡×‘×™×‘ ×©×•×œ×—×Ÿ (××• ××•× ×œ×™×™×Ÿ). ×‘×¢×–×¨×ª ×“××™×•×Ÿ, ×¡×˜ ×—×•×§×™×, ×§×•×‘×™×•×ª ×•×× ×—×”, ××ª× ×•×”×—×‘×¨×™× ×©×œ×›× ×™×•×¦×¨×™× ×™×—×“ ×¡×™×¤×•×¨ ×”×¨×¤×ª×§××•×ª ×™×™×—×•×“×™. ×”×“×’×© ×”×•× ×¢×œ ×™×¦×™×¨×ª×™×•×ª, ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ×•×¢×‘×•×“×ª ×¦×•×•×ª.</p>
                    </div>
                    <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                        <h3 class="text-3xl font-bold mb-3 text-teal-700 flex items-center justify-start"><span class="text-4xl ml-3">ğŸ­</span>××©×—×§×™ ×ª×¤×§×™×“×™× ×—×™×™× (LARP)</h3>
                        <p class="text-lg text-stone-600">×›××Ÿ ××ª× ×œ× ×¨×§ ××¡×¤×¨×™× ××ª ×”×¡×™×¤×•×¨ - ××ª× ×—×™×™× ××•×ª×•. ×”××©×ª×ª×¤×™× ××’×œ××™× ×¤×™×–×™×ª ××ª ×”×“××•×™×•×ª, ×œ×•×‘×©×™× ×ª×œ×‘×•×©×•×ª ×•×¤×•×¢×œ×™× ×‘××¨×—×‘ ×××™×ª×™. ×—×•×•×™×” ×ª×™××˜×¨×œ×™×ª ×•×¡×•×—×¤×ª ×”××“×’×™×©×” ××œ×ª×•×¨ ×•××™× ×˜×¨××§×¦×™×” ×¤×™×–×™×ª.</p>
                    </div>
                </div>

                <!-- ×”×•×¡×¤×ª ×¡×¨×˜×•×Ÿ "××•×¨×” ××‘×•×›×™×" -->
                <div class="mt-12 text-center max-w-4xl mx-auto">
                    <h3 class="text-3xl font-bold mb-4 text-stone-900">×¨×•×¦×™× ×œ×¨××•×ª ××™×š × ×¨××” ××©×—×§?</h3>
                    <p class="text-xl text-stone-600 mb-6">
                        ×¦×¤×• ×‘×¡×¨×˜×•×Ÿ "××•×¨×” ××‘×•×›×™×" ×©×œ ×“×•× ×§×™ ×©××¡×‘×™×¨ ×‘×¦×•×¨×” ×›×™×¤×™×ª ×•×‘×¨×•×¨×” ××” ×–×” ××©×—×§ ×ª×¤×§×™×“×™×:
                    </p>
                    <a href="https://www.youtube.com/watch?v=KJvCcxxfqmc" target="_blank" rel="noopener noreferrer" class="card inline-block relative group rounded-lg shadow-lg overflow-hidden max-w-lg w-full">
                        <img src="https://img.youtube.com/vi/KJvCcxxfqmc/hqdefault.jpg" alt="××•×¨×” ××‘×•×›×™× - ××™×š × ×¨××” ××©×—×§ ×ª×¤×§×™×“×™×?" class="w-full h-auto transition-transform duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center transition-opacity duration-300 group-hover:bg-opacity-20">
                            <svg class="w-20 h-20 text-white opacity-80 group-hover:opacity-100" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- NEW SECTION: WHAT DO YOU NEED? -->
        <section id="getting-started" class="mb-16 pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">××” ×¦×¨×™×š ×›×“×™ ×œ×”×ª×—×™×œ?</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">×”×—×“×©×•×ª ×”×˜×•×‘×•×ª: ×œ× ×¦×¨×™×š ×”×¨×‘×”! ××¤×©×¨ ×œ×”×ª×—×™×œ ×œ×©×—×§ ×¢× ×¦×™×•×“ ×‘×¡×™×¡×™ ×©×›×‘×¨ ×™×© ×œ×›× ×‘×‘×™×ª.</p>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">âœï¸</div>
                    <h3 class="text-2xl font-bold mb-2 text-green-700">×”××™× ×™××•× ×”×”×›×¨×—×™</h3>
                    <ul class="text-lg text-stone-600 list-inside text-right space-y-2">
                        <li>âœ”ï¸ ×—×‘×¨×™× (2-5 ×× ×©×™×)</li>
                        <li>âœ”ï¸ ×“×£, ×¢×™×¤×¨×•×Ÿ ×•××—×§</li>
                        <li>âœ”ï¸ ×¡×˜ ×§×•×‘×™×•×ª (××• ××¤×œ×™×§×¦×™×”)</li>
                        <!-- ×”×•×¡×¨ "×¡×¤×¨ ×—×•×§×™× ×‘×¡×™×¡×™" -->
                    </ul>
                </div> 
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">ğŸ“š</div>
                    <h3 class="text-2xl font-bold mb-2 text-blue-700">×¢×¨×›×ª ×”×ª×—×œ×”</h3>
                    <p class="text-lg text-stone-600">×”×“×¨×š ×”××•××œ×¦×ª ×‘×™×•×ª×¨. ×¢×¨×›×•×ª ×›××• ×©×œ "××‘×•×›×™× ×•×“×¨×§×•× ×™×" ××• "×—×¨×‘×•×ª ×•×›×©×¤×™×" ×›×•×œ×œ×•×ª ×›×œ ××” ×©×¦×¨×™×š ×œ××©×—×§ ×”×¨××©×•×Ÿ: ×¡×¤×¨ ×—×•×§×™× ××§×•×¦×¨, ×”×¨×¤×ª×§×” ××•×›× ×”, ×“××•×™×•×ª ×•×§×•×‘×™×•×ª.</p>
                </div> 
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-center">
                    <div class="text-4xl mb-3">ğŸ°</div>
                    <h3 class="text-2xl font-bold mb-2 text-purple-700">×œ××©×§×™×¢× ×™× (××•×¤×¦×™×•× ×œ×™)</h3>
                    <p class="text-lg text-stone-600">×¢× ×”×–××Ÿ, ××¤×©×¨ ×œ×©×“×¨×’ ××ª ×”×—×•×•×™×” ×¢× ××™× ×™××˜×•×¨×•×ª (×“××•×™×•×ª ×¤×œ×¡×˜×™×§), ××¤×•×ª ×§×¨×‘, ××¡×ª×•×¨ ×œ×× ×—×” ×•×¡×¤×¨×™ ×”×¨×—×‘×”. ××‘×œ ×–×” ×××© ×œ× ×—×•×‘×” ×›×“×™ ×œ×™×”× ×•×ª!</p>
                </div>
            </div>
        </section>

        <!-- SYSTEMS SECTION -->
        <!-- ×”×•×¡×¨ ×”×¨×§×¢ ×”×œ×‘×Ÿ ×›×“×™ ×œ×©××•×¨ ×¢×œ ××—×™×“×•×ª ×¢× ×¨×§×¢ ×”×¢××•×“ -->
        <section id="systems" class="mb-16 pt-10"> 
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">×‘×—×™×¨×ª ×©×™×˜×ª ××©×—×§</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">×›×œ ×”×¨×¤×ª×§×” ×¦×¨×™×›×” ×—×•×§×™×. ×©×™×˜×ª ×”××©×—×§ ×”×™× ××¢×¨×›×ª ×”×›×œ×œ×™× ×•×”×¢×•×œ× ×©×‘×”× ×ª×¤×¢×œ×•. ×”× ×” ××¨×‘×¢ ××”×©×™×˜×•×ª ×”×¤×•×¤×•×œ×¨×™×•×ª ×‘×™×•×ª×¨ ×‘×™×©×¨××œ, ×©××ª××™××•×ª ×‘××™×•×—×“ ×œ××ª×—×™×œ×™×.</p>
            <div id="systems-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            </div>
            <div class="mb-10">
                <h3 class="text-3xl font-bold mb-3 text-stone-900 text-center mt-10">×”×©×•×•××ª ×¨××ª ×”××•×¨×›×‘×•×ª</h3>
                <div class="chart-container">
                    <canvas id="systemsChart"></canvas>
                </div> 
                <p class="text-base text-center text-stone-500 mt-2">×ª×¨×©×™× ×–×” ××¦×™×’ ×”×©×•×•××” ×›×œ×œ×™×ª ×©×œ ×¨××ª ××•×¨×›×‘×•×ª ×”×—×•×§×™× ×‘×™×Ÿ ×”×©×™×˜×•×ª (× ××•×š ×™×•×ª×¨ = ×¤×©×•×˜ ×™×•×ª×¨).</p>
            </div>
        </section>

        <!-- NEW SECTION: HOW TO FIND A GROUP -->
        <section id="find-group" class="mb-16 pt-10 text-center"> 
            <h2 class="text-4xl md:text-5xl font-bold mb-2 text-stone-900">××™×š ××•×¦××™× ×§×‘×•×¦×ª ××©×—×§?</h2>
            <p class="text-xl text-stone-600 max-w-3xl mx-auto mb-8">
                ××¦×™××ª ×§×‘×•×¦×” ×”×™× ×”×¦×¢×“ ×”××¨×’×© ×”×‘×! ×”× ×” ×›××” ×“×¨×›×™× ××•××œ×¦×•×ª:
            </p>
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right hover:border-indigo-400">
                    <h3 class="text-2xl font-bold mb-3 text-indigo-700 flex items-center justify-start">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ×œ×©×—×§× ×™× ×‘×•×’×¨×™×</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        ×”×“×¨×š ×”×›×™ ×˜×•×‘×” ×”×™× ×œ×”×¦×˜×¨×£ ×œ××—×ª ××§×‘×•×¦×•×ª ×”×§×”×™×œ×” ×”×’×“×•×œ×•×ª ×‘××•× ×œ×™×™×Ÿ. ×©× ×ª×•×›×œ×• ×œ××¦×•× ××•×“×¢×•×ª ×©×œ ×× ×—×™× ×•×©×—×§× ×™×, ×•×’× ×œ×¤×¨×¡× ×©××ª× ××—×¤×©×™× ×§×‘×•×¦×”.
                    </p>
                    <a href="#community" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-indigo-700 transition-colors duration-200 text-base">××¦××• ×§×‘×•×¦×•×ª ×§×”×™×œ×”</a>
                </div>
                <div class="card bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right hover:border-teal-400">
                    <h3 class="text-2xl font-bold mb-3 text-teal-700 flex items-center justify-start">ğŸ‘§ğŸ‘¦ ×œ×™×œ×“×™× ×•×‘× ×™ × ×•×¢×¨</h3>
                    <p class="text-lg text-stone-600 mb-4">
                        ××©×—×§×™ ×ª×¤×§×™×“×™× ×”× ×—×•×•×™×” ××“×”×™××” ×œ×™×œ×“×™×! ×™×©× × ×—×•×’×™× ×•×¤×¢×™×œ×•×™×•×ª ×™×™×¢×•×“×™×•×ª ×©×‘×”× ×× ×—×™× ×× ×•×¡×™× ××œ××“×™× ××ª ×”××©×—×§ ×•××¤×¢×™×œ×™× ×§×‘×•×¦×•×ª.
                    </p>
                    <a href="#resources" class="inline-block bg-teal-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-teal-700 transition-colors duration-200 text-base">××¦××• ×—×•×’×™× ×‘××–×•×¨×›×</a>
                </div>
            </div>
        </section>

        <!-- COMMUNITY SECTION -->
        <!-- ×”×•×¡×¨ ×”×¨×§×¢ ×”×œ×‘×Ÿ ×›×“×™ ×œ×©××•×¨ ×¢×œ ××—×™×“×•×ª ×¢× ×¨×§×¢ ×”×¢××•×“ -->
        <section id="community" class="mb-16 pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">×”×§×”×™×œ×”: ××¨×’×•× ×™×, ×›× ×¡×™× ×•×§×‘×•×¦×•×ª</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">××ª× ×œ× ×œ×‘×“! ×§×”×™×œ×ª ××©×—×§×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ ×—×™×”, ×ª×•×¡×¡×ª ×•××œ××” ×‘×× ×©×™× ×©×™×©××—×• ×œ×¢×–×•×¨ ×œ×›× ×œ×”×ª×—×™×œ. ×›××Ÿ ×ª××¦××• ××ª ×”×’×•×¤×™× ×”××¨×›×–×™×™× ×©×× ×™×¢×™× ××ª ×”×ª×—×‘×™×‘.</p>
            <div class="flex justify-center items-center space-x-4 space-x-reverse mb-8 flex-wrap">
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="all">×”×›×œ</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="organization">ğŸ¢ ××¨×’×•× ×™×</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="event">ğŸ“… ×›× ×¡×™×</button>
                <button class="filter-btn community-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 mb-2 text-base" data-filter="group">ğŸ’¬ ×§×‘×•×¦×•×ª ××•× ×œ×™×™×Ÿ</button>
                <div class="relative">
                    <input type="text" id="community-search" placeholder="×—×™×¤×•×© ××–×•×¨/×™×©×•×‘..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2 mr-2 text-base w-64">
                </div>
            </div>
            <div id="community-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div> 
            <div id="community-no-results" class="hidden text-center text-stone-600 text-lg mt-8">
                <p>×œ× × ××¦××• ×ª×•×¦××•×ª ×”×ª×•×××•×ª ×œ×—×™×¤×•×© ×©×œ×š.</p>
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="community-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">×˜×¢×Ÿ ×¢×•×“</button>
                <button id="community-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-indigo-100 text-indigo-600 transition-colors duration-200 text-base">×¦××¦×</button>
            </div>
        </section>

        <!-- RESOURCES SECTION -->
        <section id="resources" class="pt-10 mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">××™×¤×” ×§×•× ×™× ×•××©×—×§×™×?</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">×¦×¨×™×›×™× ×§×•×‘×™×•×ª, ×¡×¤×¨×™ ×—×•×§×™× ××• ××§×•× ×œ×©×—×§ ×‘×•? ××”×—× ×•×™×•×ª ×”××§×¦×•×¢×™×•×ª ×•×¢×“ ×—×•×’×™ ×™×œ×“×™×, ××œ×• ×”××§×•××•×ª ×©×™×¡×¤×§×• ×œ×›× ××ª ×›×œ ××” ×©×¦×¨×™×š.</p> 
            <div class="flex justify-center items-center space-x-4 space-x-reverse mb-8 flex-wrap">
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="all">×”×›×œ</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="business">ğŸª ×¢×¡×§×™× ×•×—× ×•×™×•×ª</button>
                <button class="filter-btn resources-filter-btn px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 mb-2 text-base" data-filter="kids">ğŸ§’ ×—×•×’×™ ×™×œ×“×™×</button>
                <div class="relative">
                    <input type="text" id="resources-search" placeholder="×—×™×¤×•×© ××–×•×¨/×™×©×•×‘..." class="p-2 border border-stone-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 mb-2 mr-2 text-base w-64">
                </div>
            </div>
            <div id="resources-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
            <div id="resources-no-results" class="hidden text-center text-stone-600 text-lg mt-8">
                <p>×œ× × ××¦××• ×ª×•×¦××•×ª ×”×ª×•×××•×ª ×œ×—×™×¤×•×© ×©×œ×š.</p>
            </div>
            <div class="text-center mt-6 flex justify-center space-x-4 space-x-reverse">
                <button id="resources-load-more-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">×˜×¢×Ÿ ×¢×•×“</button>
                <button id="resources-collapse-btn" class="hidden px-4 py-2 rounded-md font-semibold bg-white shadow-sm hover:bg-teal-100 text-teal-600 transition-colors duration-200 text-base">×¦××¦×</button>
            </div>
        </section>
        
        <!-- UPCOMING EVENT SECTION -->
        <!-- ×”×•×¡×¨ ×”×¨×§×¢ ×”×œ×‘×Ÿ ×›×“×™ ×œ×©××•×¨ ×¢×œ ××—×™×“×•×ª ×¢× ×¨×§×¢ ×”×¢××•×“ -->
        <section id="closest-event" class="pt-10 mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-8 text-stone-900">××ª×™ ×”×›× ×¡ ×”×‘×?</h2>
            <div id="closest-event-container" class="max-w-md mx-auto">
                <!-- Closest event card will be rendered here -->
            </div> 
            <p class="text-base text-center text-stone-500 mt-4">×”××™×“×¢ ××•×“×•×ª ×–×× ×™ ×”×›× ×¡×™× ×”×•× ×”×¢×¨×›×” ×‘×œ×‘×“. ×ª××™×“ ×›×“××™ ×œ×”×ª×¢×“×›×Ÿ ×‘××ª×¨×™× ×”×¨×©××™×™× ×©×œ ×”×××¨×’× ×™×.</p>
        </section>

        <!-- CONTACT SECTION -->
        <section id="contact" class="pt-10">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-2 text-stone-900">×¦×¨×• ×§×©×¨</h2>
            <p class="text-xl text-center text-stone-600 max-w-2xl mx-auto mb-8">
                ××¦××ª× ×˜×¢×•×ª? ×¨×•×¦×™× ×œ×”×•×¡×™×£ ××ª ×”×¢×¡×§ ××• ×”×§×”×™×œ×” ×©×œ×›×? ×™×© ×œ×›× ×”×¦×¢×” ×œ×©×™×¤×•×¨? × ×©××— ×œ×©××•×¢!
            </p>
            <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg border border-stone-200 text-right">
                    <p class="text-center text-xl text-stone-700">
                        × ×™×ª×Ÿ ×œ×©×œ×•×— ××™×™×œ ×™×©×™×¨×•×ª ×œ×›×ª×•×‘×ª:
                        <a href="mailto:gate@rrpg.top?subject=%D7%A4%D7%A0%D7%99%D7%99%D7%94%20%D7%91%D7%A0%D7%95%D7%A9%D7%90%20%D7%9C%D7%90%D7%AA%D7%A8%20%D7%A9%D7%A2%D7%A8%20%D7%94%D7%A8%D7%A4%D7%AA%D7%A7%D7%94" class="text-purple-600 hover:underline font-bold">gate@rrpg.top</a>
                    </p>
            </div>
        </section>
    </main>

    <footer class="text-center py-6 mt-12 bg-stone-200 border-t border-stone-300">
        <p class="text-base text-stone-600">× ×•×¦×¨ ×‘××”×‘×” ×¢×‘×•×¨ ×§×”×™×œ×ª ×©×—×§× ×™ ×”×ª×¤×§×™×“×™× ×‘×™×©×¨××œ ×¢"×™ <a href="https://rrpg.top" class="text-indigo-600 hover:underline">×¨××•×‘×Ÿ ×¦×™×¨×œ-×× ×“×œ×•×‘×™×¥'</a>.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const systemsData = [
            { name: "××‘×•×›×™× ×•×“×¨×§×•× ×™× (D&D 5e)", badge: "×”× ×¤×•×¥ ×‘×™×•×ª×¨ ×‘×¢×•×œ×", description: "×”××©×—×§ ×”×¤×•×¤×•×œ×¨×™ ×‘×™×•×ª×¨ ×‘×¢×•×œ×, ×”××¦×™×¢ ×—×•×•×™×ª ×¤× ×˜×–×™×” ×§×œ××¡×™×ª. ×”×•× ××©×œ×‘ ×‘×¦×•×¨×” ××•×¤×œ××” ××œ×× ×˜×™× ×©×œ ×¤× ×˜×–×™×”, ×§×‘×œ×ª ×”×—×œ×˜×•×ª ××¡×˜×¨×˜×’×™×ª ×•×©×™×ª×•×£ ×¤×¢×•×œ×” ×—×‘×¨×ª×™ ×¢××•×§.", why: "× ×§×•×“×ª ×”×›× ×™×¡×” ×”×¡×˜× ×“×¨×˜×™×ª ×œ×ª×—×‘×™×‘. ×§×œ ×œ××¦×•× ×§×‘×•×¦×” ×•×—×•××¨×™× ×œ××ª×—×™×œ×™×, ×›××• '×¢×¨×›×ª ×”×”×ª×—×œ×”' ×”××¦×•×™× ×ª.", complexity: 10, color: 'rgba(220, 38, 38, 0.7)', link: "https://www.dndbeyond.com/" },
            { name: "×—×¨×‘×•×ª ×•×›×©×¤×™×", badge: "××•××œ×¥ ×œ××ª×—×™×œ×™× ×•×œ×¦×¢×™×¨×™×", description: "×—×–×¨×” ×œ×©×•×¨×©×™× ×©×œ ××©×—×§×™ ×”×ª×¤×§×™×“×™×, ×¢× ×©×™×˜×” ×§×œ×ª-×—×•×§×™× ×•×’××™×©×” ×”××¢×•×“×“×ª ×™×¦×™×¨×ª×™×•×ª ×•××œ×ª×•×¨ ××¦×“ ×”×©×—×§× ×™× ×•×”×× ×—×”. ×”×¢×¨×›×” ×œ××ª×—×™×œ ×”×™× ×©×¢×¨ ×›× ×™×¡×” ××•×©×œ× ×œ×ª×—×‘×™×‘.", why: "××¢×•×œ×” ×œ××ª×—×™×œ×™× ×•×œ×™×œ×“×™×. ×¢×¨×›×ª ×”××ª×—×™×œ ×‘×¢×‘×¨×™×ª ××œ××“×ª ××ª ×”××©×—×§ ×¦×¢×“-××—×¨-×¦×¢×“, ×›×•×œ×œ ×”×¨×¤×ª×§×ª ×¡×•×œ×•.", complexity: 3, color: 'rgba(217, 119, 6, 0.7)', link: "https://swordsandwizardry.co.il/" },
            { name: "×¤××ª'×¤×™×™× ×“×¨ ×‘×¢×•×œ××•×ª ×¤×¨××™×™×", badge: "×œ×—×•×‘×‘×™ ×”××§×©×Ÿ", description: "×©×™×œ×•×‘ ×× ×¦×— ×©×œ ×¢×•×œ× ×”×¤× ×˜×–×™×” ×”×¢×©×™×¨ ×©×œ '×¤××ª'×¤×™×™× ×“×¨' ×¢× ×× ×•×¢ ×”×—×•×§×™× ×”××”×™×¨ ×•×”×§×•×œ× ×•×¢×™ ×©×œ '×¢×•×œ××•×ª ×¤×¨××™×™×'. ×”×¨×¤×ª×§××•×ª ××¡××¨×•×ª ×©×™×¢×¨ ×•××§×©×Ÿ ××•×ª×— ×¢×¦×‘×™×.", why: "×”×˜×•×‘ ××©× ×™ ×”×¢×•×œ××•×ª - ×¢×•××§ ×¢×œ×™×œ×ª×™ ×¢× ×—×•×§×™× ×§×œ×™×œ×™×. ×¡×¤×¨ ×”×‘×¡×™×¡ ×‘×¢×‘×¨×™×ª ×›×•×œ×œ ××ª ×›×œ ××” ×©×¦×¨×™×š ×›×“×™ ×œ×”×ª×—×™×œ ×œ×©×—×§.", complexity: 7, color: 'rgba(34, 197, 94, 0.7)', link: "https://pundak.games/savage-pathfinder/" },
            { name: "×× ×•×¢ ×”××¤×•×§×œ×™×¤×¡×”", badge: "×œ×—×•×‘×‘×™ ×—×•×¤×© ×•××§×•×¨×™×•×ª", description: "×× ×•×¢ ××©×—×§ ×’××™×© ×©×¢×œ×™×• ×‘× ×•×™×•×ª ×©×™×˜×•×ª ×¨×‘×•×ª. ×©× ×“×’×© ×¢×œ ×¡×™×¤×•×¨ ×•×™×¦×™×¨×ª×™×•×ª ×¢×œ ×¤× ×™ ×§×¨×‘×•×ª ×˜×§×˜×™×™×. ×”××©×—×§×™× ×”× ×¤×•×¦×™× ×‘×¢×‘×¨×™×ª ×”× '×¤×œ××™×: ×’×™×‘×•×¨×™ ×”××—×¨' ×•'×•×•×× ×•×¨'.", why: "×× ×•×¢ ×¤×©×•×˜ ×œ×œ××™×“×” ×”×××¤×©×¨ ×œ×”×ª××§×“ ×‘×¡×™×¤×•×¨. ××ª××™× ×œ××’×•×•×Ÿ ×¨×—×‘ ×©×œ ×–'×× ×¨×™× ×•×¡×’× ×•× ×•×ª ××©×—×§.", complexity: 5, color: 'rgba(255, 165, 0, 0.7)', link: "https://vanor.co.il/" }
        ];

        // --- Systems Section Rendering ---
        const systemsContainer = document.getElementById('systems-container');
        systemsData.forEach(system => {
            const card = document.createElement('div');
            card.className = 'card bg-white rounded-lg shadow-lg border border-stone-200 overflow-hidden flex flex-col';
            card.innerHTML = `
                <div class="p-6 cursor-pointer flex-grow" onclick="toggleDetails(this)">
                    ${system.badge ? `<div class="mb-3"><span class="text-sm font-bold text-white px-3 py-1 rounded-full" style="background-color: ${system.color.replace('0.7', '1')}">${system.badge}</span></div>` : ''}
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <a href="${system.link}" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-600">${system.name}</a>
                    </h3>
                    <p class="text-lg text-stone-600">${system.description}</p>
                    <div class="flex items-center justify-end mt-4 text-base font-semibold text-indigo-600">
                        <span>×œ××” ×–×” ×˜×•×‘ ×œ××ª×—×™×œ×™×?</span>
                        <svg class="w-4 h-4 mr-2 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div class="details-content bg-gray-50">
                    <div class="p-6 border-t border-gray-200">
                        <p class="text-base text-stone-600">${system.why}</p>
                    </div>
                </div>
            `;
            systemsContainer.appendChild(card);
        });

        window.toggleDetails = function(element) {
            const content = element.nextElementSibling;
            const svg = element.querySelector('svg');
            if (content.style.maxHeight && content.style.maxHeight !== '0px') {
                content.style.maxHeight = '0px';
                svg.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                svg.style.transform = 'rotate(180deg)';
            }
        }
        
        // --- Card Creation and Filtering Logic ---
        function createCard(item) {
            let typeLabel = '';
            let typeColor = '';
            switch (item.type) {
                case 'organization': typeLabel = 'ğŸ¢ ××¨×’×•×Ÿ'; typeColor = 'bg-blue-100 text-blue-800'; break;
                case 'event': typeLabel = 'ğŸ“… ××™×¨×•×¢/×›× ×¡'; typeColor = 'bg-purple-100 text-purple-800'; break;
                case 'group': typeLabel = 'ğŸ’¬ ×§×‘×•×¦×ª ××•× ×œ×™×™×Ÿ'; typeColor = 'bg-green-100 text-green-800'; break;
                case 'business': typeLabel = 'ğŸª ×¢×¡×§/×—× ×•×ª'; typeColor = 'bg-yellow-100 text-yellow-800'; break;
                case 'kids': typeLabel = 'ğŸ§’ ×—×•×’×™ ×™×œ×“×™×'; typeColor = 'bg-pink-100 text-pink-800'; break;
            }
            return `
                <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-indigo-400 h-full">
                    <div class="flex justify-between items-start">
                        <h3 class="text-xl font-bold text-stone-800 mb-2">${item.name}</h3>
                        <span class="text-sm font-semibold px-2 py-1 rounded-full ${typeColor} whitespace-nowrap">${typeLabel}</span>
                    </div>
                    ${item.location ? `<p class="text-base text-stone-500 mb-2 font-semibold">ğŸ“ ${item.location}</p>` : ''}
                    <p class="text-base text-stone-600">${item.description}</p>
                </a>
            `;
        }

        // --- UPDATED SEARCH LOGIC FOR REGIONS ---
        function setupFilterAndLoadMore(containerId, data, buttonClass, searchInputId, loadMoreBtnId, collapseBtnId, noResultsId, regionsData) {
            const container = document.getElementById(containerId);
            const buttons = document.querySelectorAll(`.${buttonClass}`);
            const searchInput = document.getElementById(searchInputId);
            const loadMoreBtn = document.getElementById(loadMoreBtnId);
            const collapseBtn = document.getElementById(collapseBtnId);
            const noResultsEl = document.getElementById(noResultsId);

            let currentFilter = 'all';
            let currentLimit = 6;

            function updateDisplay() {
                let filteredData = data;

                if (currentFilter !== 'all') {
                    filteredData = data.filter(item => item.type === currentFilter);
                }

                if (searchInput.value) {
                    const query = searchInput.value.trim().toLowerCase();
                    
                    // 1. Identify relevant regions based on the query
                    const relevantRegions = regionsData ? regionsData.filter(region => {
                        if (region.name.includes(query)) return true;
                        return region.settlements.some(settlement => settlement.includes(query));
                    }) : [];

                    // 2. Collect all potential location matches from these regions
                    const expandedKeywords = [];
                    relevantRegions.forEach(region => {
                        expandedKeywords.push(region.name);
                        region.settlements.forEach(s => {
                             expandedKeywords.push(s);
                             // ×ª××™×›×” ×‘×©××•×ª ××•×¨×›×‘×™× ×›××• "×ª×œ ××‘×™×‘-×™×¤×•" ×›×š ×©×’× "×ª×œ ××‘×™×‘" ×™×ª×¤×•×¡
                             if (s.includes('-')) {
                                 s.split('-').forEach(part => {
                                     if (part.trim().length > 2) expandedKeywords.push(part.trim());
                                 });
                             }
                        });
                    });

                    // Remove duplicates
                    const uniqueExpandedKeywords = [...new Set(expandedKeywords)];

                    // 3. Filter and Score
                    filteredData = filteredData.map(item => {
                        let score = 0;
                        
                        // Basic Checks
                        if (item.name.toLowerCase().includes(query)) score += 50;
                        if (item.description.toLowerCase().includes(query)) score += 20;
                        
                        // Location Checks
                        if (item.location) {
                            const loc = item.location.toLowerCase();
                            // Direct match
                            if (loc.includes(query)) score += 30;
                            
                            // Expanded match (Regional search)
                            if (uniqueExpandedKeywords.some(keyword => loc.includes(keyword))) {
                                score += 15; // Regional match
                            }
                        }
                        
                        return { item, score };
                    })
                    .filter(entry => entry.score > 0)
                    .sort((a, b) => b.score - a.score)
                    .map(entry => entry.item);
                }

                // Show "no results" message if applicable
                if(filteredData.length === 0 && searchInput.value) {
                    noResultsEl.classList.remove('hidden');
                } else {
                    noResultsEl.classList.add('hidden');
                }

                const dataToRender = filteredData.slice(0, currentLimit);
                container.innerHTML = dataToRender.map(createCard).join('');

                loadMoreBtn.classList.toggle('hidden', filteredData.length <= currentLimit);
                collapseBtn.classList.toggle('hidden', !(filteredData.length > 6 && currentLimit >= filteredData.length));
            }

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    currentFilter = button.dataset.filter;
                    currentLimit = 6;
                    buttons.forEach(btn => btn.classList.remove('active', 'bg-indigo-600', 'text-white', 'bg-teal-600', 'bg-indigo-100', 'text-indigo-900', 'bg-teal-100', 'text-teal-900'));
                    button.classList.add('active');
                    if (buttonClass.includes('community')) {
                        button.classList.add('bg-indigo-100', 'text-indigo-900');
                    } else {
                        button.classList.add('bg-teal-100', 'text-teal-900');
                    }
                    updateDisplay();
                });
            });

            searchInput.addEventListener('input', () => {
                currentLimit = 6;
                updateDisplay();
            });

            loadMoreBtn.addEventListener('click', () => {
                currentLimit += 6;
                updateDisplay();
            });        
            
            collapseBtn.addEventListener('click', () => {
                currentLimit = 6;
                updateDisplay();
            });

            updateDisplay();
        }

        // --- Closest Event Logic ---
        function getClosestEvent(eventsData) {
            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            const currentYear = now.getFullYear();
            const events = eventsData.filter(item => item.type === 'event');
            let closestEvent = null;
            let minTimeDiff = Infinity;
            
            let futureEvents = events.filter(event => {
                let eventYear = currentYear;
                if (event.month < currentMonth) {
                    eventYear++;
                }
                return new Date(eventYear, event.month - 1, 1) >= now;
            });

            if (futureEvents.length > 0) {
                futureEvents.sort((a, b) => { 
                     let aYear = a.month >= currentMonth ? currentYear : currentYear + 1; 
                     let bYear = b.month >= currentMonth ? currentYear : currentYear + 1; 
                     return new Date(aYear, a.month - 1, 1) - new Date(bYear, b.month - 1, 1);
                });
                return futureEvents[0];
            }
            
            // Fallback if all events passed for this year
            if (events.length > 0){ 
                 events.sort((a,b) => a.month - b.month); 
                 return events[0];
            }
            
            return null;
        }

        function renderClosestEvent(eventsData) {
            const closest = getClosestEvent(eventsData);
            const closestEventContainer = document.getElementById('closest-event-container');
            if (closest) {
                const monthNames = ["×™× ×•××¨", "×¤×‘×¨×•××¨", "××¨×¥", "××¤×¨×™×œ", "×××™", "×™×•× ×™", "×™×•×œ×™", "××•×’×•×¡×˜", "×¡×¤×˜××‘×¨", "××•×§×˜×•×‘×¨", "× ×•×‘××‘×¨", "×“×¦××‘×¨"];
                const closestMonthName = monthNames[closest.month - 1];
                closestEventContainer.innerHTML = `
                    <a href="${closest.link}" target="_blank" rel="noopener noreferrer" class="card block bg-white p-6 rounded-lg shadow-lg border border-stone-200 hover:border-purple-400 text-center">
                        <h3 class="text-xl font-bold text-stone-800 mb-2">${closest.name}</h3>
                        <p class="text-lg text-stone-600 mb-2">××ª×§×™×™× ×‘×“×¨×š ×›×œ×œ ×‘×—×•×“×©: <span class="font-semibold text-purple-700">${closestMonthName}</span></p>
                        ${closest.location ? `<p class="text-base text-stone-600 mb-2">××™×§×•×: ${closest.location}</p>` : ''}
                        <p class="text-base text-stone-600 mb-4">${closest.description}</p>
                        <p class="text-base font-bold text-purple-600">×œ×—×¦×• ×œ×¤×¨×˜×™× × ×•×¡×¤×™× ×‘××ª×¨ ×”×¨×©××™</p>
                    </a>
                `;
            } else {
                closestEventContainer.innerHTML = `<p class="text-base text-center text-stone-600">××™×Ÿ ×›× ×¡×™× ×§×¨×•×‘×™× ×–××™× ×™× ×›×¨×’×¢.</p>`;
            }
        }

        // --- FETCH DATA FROM JSON ---
        fetch('data.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                const communityData = data.communityData;
                const resourcesData = data.resourcesData;
                const regionsData = data.regions; // ×˜×¢×™× ×ª ×”××™×“×¢ ×¢×œ ×”××–×•×¨×™×

                // ×”×¢×‘×¨×ª ×”××™×“×¢ ×”×—×“×© ×œ×¤×•× ×§×¦×™×™×ª ×”×¡×™× ×•×Ÿ
                setupFilterAndLoadMore('community-container', communityData, 'community-filter-btn', 'community-search', 'community-load-more-btn', 'community-collapse-btn', 'community-no-results', regionsData);
                setupFilterAndLoadMore('resources-container', resourcesData, 'resources-filter-btn', 'resources-search', 'resources-load-more-btn', 'resources-collapse-btn', 'resources-no-results', regionsData);
                renderClosestEvent(communityData);
            })
            .catch(error => {
                console.error('Error loading data:', error);
                const errorMessage = '<div class="col-span-full text-center text-red-600 font-bold text-lg mt-4">×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×. × × ×œ× ×¡×•×ª ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨.</div>';
                document.getElementById('community-container').innerHTML = errorMessage;
                document.getElementById('resources-container').innerHTML = errorMessage;
                document.getElementById('closest-event-container').innerHTML = '<p class="text-center text-red-600">×œ× × ×™×ª×Ÿ ×œ×˜×¢×•×Ÿ ××™×“×¢ ×¢×œ ×›× ×¡×™× ×›×¨×’×¢.</p>';
            });

        // --- Chart.js Rendering ---
        const ctx = document.getElementById('systemsChart').getContext('2d');
        const systemsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: systemsData.map(s => s.name),
                datasets: [{
                    label: '××•×¨×›×‘×•×ª ×—×•×§×™×',
                    data: systemsData.map(s => s.complexity),
                    backgroundColor: systemsData.map(s => s.color),
                    borderColor: systemsData.map(s => s.color.replace('0.7', '1')),
                    borderWidth: 1,
                    borderRadius: 5
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true, max: 10, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { font: { family: "'Assistant', sans-serif" }}},
                    y: { grid: { display: false }, ticks: { font: { family: "'Assistant', sans-serif", size: 14 }, autoSkip: false }}
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { rtl: true, bodyFont: { family: "'Assistant', sans-serif" }, titleFont: { family: "'Assistant', sans-serif" }}
                }
            }
        });

        // --- Mobile Navigation ---
        document.getElementById('mobile-nav').addEventListener('change', function() {
            const targetId = this.value;
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 80, // Offset for header
                    behavior: 'smooth'
                });
            }
        });

    });
    </script>
</body>
</html>
